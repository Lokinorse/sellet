var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function o(t){return t()}function r(){return Object.create(null)}function a(t){t.forEach(o)}function s(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e,o){return t[1]?n({},n(e.$$scope.ctx,t[1](o?o(e):{}))):e.$$scope.ctx}const u="undefined"!=typeof window;let i=u?()=>window.performance.now():()=>Date.now(),d=u?t=>requestAnimationFrame(t):t;const f=new Set;let p,$=!1;function m(){f.forEach(t=>{t[0](i())||(f.delete(t),t[1]())}),($=f.size>0)&&d(m)}function h(t,e){t.appendChild(e)}function v(t,e,n){t.insertBefore(e,n||null)}function g(t){t.parentNode.removeChild(t)}function y(t){return document.createElement(t)}function w(t){return document.createTextNode(t)}function b(){return w(" ")}function x(){return w("")}function C(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function _(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function S(t,e){e=""+e,t.data!==e&&(t.data=e)}let k,E=0,N={};function P(t,e,n,o,r,a,s,l=0){const c=16.666/o;let u="{\n";for(let t=0;t<=1;t+=c){const o=e+(n-e)*a(t);u+=100*t+`%{${s(o,1-o)}}\n`}const i=u+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(i)}_${l}`;if(!N[d]){if(!p){const t=y("style");document.head.appendChild(t),p=t.sheet}N[d]=!0,p.insertRule(`@keyframes ${d} ${i}`,p.cssRules.length)}const f=t.style.animation||"";return t.style.animation=`${f?`${f}, `:""}${d} ${o}ms linear ${r}ms 1 both`,E+=1,d}function L(t,e){t.style.animation=(t.style.animation||"").split(", ").filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")).join(", "),e&&!--E&&d(()=>{if(E)return;let t=p.cssRules.length;for(;t--;)p.deleteRule(t);N={}})}function M(t){k=t}const O=[],A=[],j=[],D=[],I=Promise.resolve();let R,q=!1;function T(t){j.push(t)}function B(){const t=new Set;do{for(;O.length;){const t=O.shift();M(t),F(t.$$)}for(;A.length;)A.pop()();for(let e=0;e<j.length;e+=1){const n=j[e];t.has(n)||(n(),t.add(n))}j.length=0}while(O.length);for(;D.length;)D.pop()();q=!1}function F(t){t.fragment&&(t.update(t.dirty),a(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(T))}function z(t,e,n){t.dispatchEvent(function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(`${e?"intro":"outro"}${n}`))}const H=new Set;let G;function J(){G={r:0,c:[],p:G}}function K(){G.r||a(G.c),G=G.p}function Q(t,e){t&&t.i&&(H.delete(t),t.i(e))}function U(t,e,n,o){if(t&&t.o){if(H.has(t))return;H.add(t),G.c.push(()=>{H.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}const V={duration:0};function W(n,o,r,l){let c=o(n,r),u=l?0:1,p=null,h=null,v=null;function g(){v&&L(n,v)}function y(t,e){const n=t.b-u;return e*=Math.abs(n),{a:u,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function w(o){const{delay:r=0,duration:s=300,easing:l=e,tick:w=t,css:b}=c||V,x={start:i()+r,b:o};o||(x.group=G,G.r+=1),p?h=x:(b&&(g(),v=P(n,u,o,s,r,l,b)),o&&w(0,1),p=y(x,s),T(()=>z(n,o,"start")),function(t){let e;$||($=!0,d(m)),new Promise(n=>{f.add(e=[t,n])})}(t=>{if(h&&t>h.start&&(p=y(h,s),h=null,z(n,p.b,"start"),b&&(g(),v=P(n,u,p.b,p.duration,0,l,c.css))),p)if(t>=p.end)w(u=p.b,1-u),z(n,p.b,"end"),h||(p.b?g():--p.group.r||a(p.group.c)),p=null;else if(t>=p.start){const e=t-p.start;u=p.a+p.d*l(e/p.duration),w(u,1-u)}return!(!p&&!h)}))}return{run(t){s(c)?(R||(R=Promise.resolve()).then(()=>{R=null}),R).then(()=>{c=c(),w(t)}):w(t)},end(){g(),p=h=null}}}function X(t,e,n){const{fragment:r,on_mount:l,on_destroy:c,after_update:u}=t.$$;r.m(e,n),T(()=>{const e=l.map(o).filter(s);c?c.push(...e):a(e),t.$$.on_mount=[]}),u.forEach(T)}function Y(t,e){t.$$.fragment&&(a(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function Z(t,e){t.$$.dirty||(O.push(t),q||(q=!0,I.then(B)),t.$$.dirty=r()),t.$$.dirty[e]=!0}function tt(e,n,o,s,l,c){const u=k;M(e);const i=n.props||{},d=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:l,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:r(),dirty:null};let f=!1;var p;d.ctx=o?o(e,i,(t,n,o=n)=>(d.ctx&&l(d.ctx[t],d.ctx[t]=o)&&(d.bound[t]&&d.bound[t](o),f&&Z(e,t)),n)):i,d.update(),f=!0,a(d.before_update),d.fragment=s(d.ctx),n.target&&(n.hydrate?d.fragment.l((p=n.target,Array.from(p.childNodes))):d.fragment.c(),n.intro&&Q(e.$$.fragment),X(e,n.target,n.anchor),B()),M(u)}class et{$destroy(){Y(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const nt=window.location.origin.includes("localhost"),ot="https://sellet.ru",rt=nt?"/sellet_widget.css":"https://sellet.ru/widget/sellet_widget.css",{Object:at}=window;function st(t){var e=new FormData;if(window.localStorage)return at.keys(t).map(n=>{var o=t[n];e.append(n,o)}),e}function lt(e){var n;return{c(){(n=y("div")).innerHTML='<div class="lds-ring svelte-anuude"><div class="svelte-anuude"></div><div class="svelte-anuude"></div><div class="svelte-anuude"></div><div class="svelte-anuude"></div></div>',_(n,"class","sellet-preloader-wrapper svelte-anuude")},m(t,e){v(t,n,e)},p:t,i:t,o:t,d(t){t&&g(n)}}}class ct extends et{constructor(t){super(),tt(this,t,null,lt,l,[])}}function ut(t){var e=t-1;return e*e*e+1}function it(t,e){var n=e.delay;void 0===n&&(n=0);var o=e.duration;void 0===o&&(o=400);var r=+getComputedStyle(t).opacity;return{delay:n,duration:o,css:function(t){return"opacity: "+t*r}}}function dt(t,e){var n=e.delay;void 0===n&&(n=0);var o=e.duration;void 0===o&&(o=400);var r=e.easing;void 0===r&&(r=ut);var a=e.x;void 0===a&&(a=0);var s=e.y;void 0===s&&(s=0);var l=getComputedStyle(t),c=+l.opacity,u="none"===l.transform?"":l.transform;return{delay:n,duration:o,easing:r,css:function(t){return"\n\t\t\ttransform: "+u+" translate("+(1-t)*a+"px, "+(1-t)*s+"px);\n\t\t\topacity: "+t*c}}}function ft(t){var e,o,r,s,l,u,i,d,f,p,$,m;const x=t.$$slots.default,k=function(t,e,n){if(t){const o=c(t,e,n);return t[0](o)}}(x,t,null);return{c(){e=y("div"),o=y("div"),(r=y("div")).textContent="×",s=b(),l=y("div"),u=w(t.header),i=b(),d=y("div"),k&&k.c(),_(r,"class","sellet-modal-close svelte-1339mmt"),_(l,"class","sellet-modal-header svelte-1339mmt"),_(d,"class","sellet-modal-content svelte-1339mmt"),_(o,"class","sellet-modal-inner-wrapper svelte-1339mmt"),_(e,"class","sellet-modal-wrapper svelte-1339mmt"),m=[C(r,"click",t.onClose),C(o,"click",pt),C(e,"click",t.wrapperClose)]},l(t){k&&k.l(div2_nodes)},m(t,n){v(t,e,n),h(e,o),h(o,r),h(o,s),h(o,l),h(l,u),h(o,i),h(o,d),k&&k.m(d,null),$=!0},p(t,e){$&&!t.header||S(u,e.header),k&&k.p&&t.$$scope&&k.p(function(t,e,o,r){return t[1]?n({},n(e.$$scope.changed||{},t[1](r?r(o):{}))):e.$$scope.changed||{}}(x,e,t,null),c(x,e,null))},i(t){$||(Q(k,t),T(()=>{f||(f=W(o,dt,{y:200,duration:300},!0)),f.run(1)}),T(()=>{p||(p=W(e,it,{duration:300},!0)),p.run(1)}),$=!0)},o(t){U(k,t),f||(f=W(o,dt,{y:200,duration:300},!1)),f.run(0),p||(p=W(e,it,{duration:300},!1)),p.run(0),$=!1},d(t){t&&g(e),k&&k.d(t),t&&(f&&f.end(),p&&p.end()),a(m)}}}function pt(t){t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault()}function $t(t,e,n){let{header:o,onClose:r}=e;let{$$slots:a={},$$scope:s}=e;return t.$set=(t=>{"header"in t&&n("header",o=t.header),"onClose"in t&&n("onClose",r=t.onClose),"$$scope"in t&&n("$$scope",s=t.$$scope)}),{header:o,onClose:r,wrapperClose:function(){r()},$$slots:a,$$scope:s}}class mt extends et{constructor(t){super(),tt(this,t,$t,ft,l,["header","onClose"])}}function ht(t,e,n){const o=Object.create(t);return o.error=e[n],o}function vt(t){var e,n=new mt({props:{header:"Ошибка!",onClose:t.handleCloseModal,$$slots:{default:[yt]},$$scope:{ctx:t}}});return{c(){n.$$.fragment.c()},m(t,o){X(n,t,o),e=!0},p(t,e){var o={};(t.$$scope||t.modalState)&&(o.$$scope={changed:t,ctx:e}),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){U(n.$$.fragment,t),e=!1},d(t){Y(n,t)}}}function gt(t){var e,n,o=t.error+"";return{c(){e=y("div"),n=w(o),_(e,"class","sellet-error-message")},m(t,o){v(t,e,o),h(e,n)},p(t,e){t.modalState&&o!==(o=e.error+"")&&S(n,o)},d(t){t&&g(e)}}}function yt(t){var e;let n=t.modalState.errors,o=[];for(let e=0;e<n.length;e+=1)o[e]=gt(ht(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=x()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);v(t,e,n)},p(t,r){if(t.modalState){let a;for(n=r.modalState.errors,a=0;a<n.length;a+=1){const s=ht(r,n,a);o[a]?o[a].p(t,s):(o[a]=gt(s),o[a].c(),o[a].m(e.parentNode,e))}for(;a<o.length;a+=1)o[a].d(1);o.length=n.length}},d(t){!function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(o,t),t&&g(e)}}}function wt(t){var e,n=new mt({props:{header:"Подождите",onClose:t.handleCloseModal,$$slots:{default:[bt]},$$scope:{ctx:t}}});return{c(){n.$$.fragment.c()},m(t,o){X(n,t,o),e=!0},p(t,e){var o={};t.$$scope&&(o.$$scope={changed:t,ctx:e}),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){U(n.$$.fragment,t),e=!1},d(t){Y(n,t)}}}function bt(t){var e,n=new ct({});return{c(){n.$$.fragment.c()},m(t,o){X(n,t,o),e=!0},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){U(n.$$.fragment,t),e=!1},d(t){Y(n,t)}}}function xt(t){var e,n=new mt({props:{header:"Спасибо за заказ",onClose:t.handleCloseModal,$$slots:{default:[Ct]},$$scope:{ctx:t}}});return{c(){n.$$.fragment.c()},m(t,o){X(n,t,o),e=!0},p(t,e){var o={};t.$$scope&&(o.$$scope={changed:t,ctx:e}),n.$set(o)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){U(n.$$.fragment,t),e=!1},d(t){Y(n,t)}}}function Ct(t){var e;return{c(){e=w("Наш менеджер свяжется с вами в ближашее время!")},m(t,n){v(t,e,n)},d(t){t&&g(e)}}}function _t(t){var e,n,o,r,a="errors"===t.state&&t.modalState.errors.length&&vt(t),s="loading"===t.state&&wt(t),l="thanks"===t.state&&xt(t);return{c(){a&&a.c(),e=b(),s&&s.c(),n=b(),l&&l.c(),o=x()},m(t,c){a&&a.m(t,c),v(t,e,c),s&&s.m(t,c),v(t,n,c),l&&l.m(t,c),v(t,o,c),r=!0},p(t,r){"errors"===r.state&&r.modalState.errors.length?a?(a.p(t,r),Q(a,1)):((a=vt(r)).c(),Q(a,1),a.m(e.parentNode,e)):a&&(J(),U(a,1,1,()=>{a=null}),K()),"loading"===r.state?s?(s.p(t,r),Q(s,1)):((s=wt(r)).c(),Q(s,1),s.m(n.parentNode,n)):s&&(J(),U(s,1,1,()=>{s=null}),K()),"thanks"===r.state?l?(l.p(t,r),Q(l,1)):((l=xt(r)).c(),Q(l,1),l.m(o.parentNode,o)):l&&(J(),U(l,1,1,()=>{l=null}),K())},i(t){r||(Q(a),Q(s),Q(l),r=!0)},o(t){U(a),U(s),U(l),r=!1},d(t){a&&a.d(t),t&&g(e),s&&s.d(t),t&&g(n),l&&l.d(t),t&&g(o)}}}function St(t,e,n){let o=null,r={errors:[]},a={name:null,phone:null,selltype:null,cost:null,offer:null,title:null};async function s(t){const e=function(t){var e=[];return t.name||e.push("Не заполнено имя"),t.phone||e.push("Не заполнен телефон"),t.selltype||e.push("Не задан тип продажи"),t.cost||e.push("Не задано цена"),t.offer||e.push("Не задан оффер"),t.title||e.push("Не задан название товара"),e}(t);if(e.length)n("state",o="errors"),n("modalState",r.errors=e,r);else{n("state",o="loading");await fetch(`${ot}/order.php`,{method:"POST",body:st(t)});n("state",o="thanks")}}return document.addEventListener("submit",function(t){"form"!==!t.target.tagName.toLowerCase()&&(t.preventDefault(),t.stopPropagation(),s(function(t){if(window.localStorage)return at.keys(t).map(e=>{var n=t[e];window.localStorage.setItem(e,n)}),t}(a=function(t){for(var e={},n=t.querySelectorAll("input, select, textarea"),o=0;o<n.length;++o){var r=n[o],a=r.name,s=r.value;a&&(e[a]=s)}return e}(this))))},!1),document.addEventListener("click",function(t){t.target.classList.contains("sellet-buy-button")&&(t.preventDefault(),t.stopPropagation(),s(function(t){return t.name&&t.phone||!window.localStorage?t:(at.keys(t).map(e=>{t[e],t[e]=window.localStorage.getItem(e)}),t)}(a)))},!1),{state:o,modalState:r,handleCloseModal:function(){n("state",o=null),n("modalState",r.errors=[],r)}}}let kt=document.createElement("div");kt.id="sellet-wrapper",document.body.append(kt);let Et=document.createElement("link");return Et.href=rt,Et.rel="stylesheet",document.head.append(Et),new class extends et{constructor(t){super(),tt(this,t,St,_t,l,[])}}({target:document.getElementById("sellet-wrapper")})}();
//# sourceMappingURL=sellet_widget.js.map
